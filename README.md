# Frontend – Repository Overview and Developer Guide

This document gives a manager‑friendly overview of the frontend repository and a concise guide for developers. It covers architecture, stack, why these choices, how to run the app, file organization and logic boundaries, production readiness, good practices, and onboarding instructions.

## Architecture
- SPA with typed file‑based routing (TanStack Router) and Suspense‑first data flows.
- Feature‑oriented modules with a single `public-api.ts` per feature. No deep cross‑feature imports.
- Local UI state with React; remote state via TanStack Query hooks under `<Suspense>` and error boundaries.
- Headless primitives for tables/lists (TanStack Table/Virtual) and typed forms (TanStack Form) when needed.
- Styling with Tailwind. Global CSS limited to tokens/reset; all else is locally scoped.
- i18n via `i18next` / `react-i18next` with locale‑scoped routes (e.g., `/$locale`).

## Tech Stack
- React 19 + TypeScript (strict)
- Vite 7 (bundler/dev server)
- Tailwind CSS 4
- TanStack: Router v1, Query v5, Table v8, Virtual v3, Form v1
- i18n: i18next, react‑i18next
- Validation: Zod
- Lint/Format: ESLint Flat, Prettier (via ESLint)

## Why This Stack
- TanStack‑first: headless, typed, composable primitives that scale from POC to enterprise without rewrites.
- React 19: Suspense, actions, compiler; enables consistent data loading and fine‑grained performance.
- Vite: fast DX and modern output; simple static hosting and clear SSR upgrade path (TanStack Start).
- Tailwind: utility‑first, collocated styles; eliminates ad‑hoc global CSS and improves consistency.
- Zod: schema‑driven validation; safer forms and API contracts.

## File Organization and Logic Boundaries
Key directories (non‑exhaustive):
- `src/app/` – bootstrap and providers. Entry: `src/app/main.tsx`.
- `src/routes/` – file‑based routes, typed and generated by the Vite plugin.
  - `src/routes/__root.tsx` – root layout + `<Suspense>` + error boundary.
  - `src/routes/index.tsx` – redirects to a locale route.
  - `src/routes/$locale/` – locale‑scoped pages.
- `src/features/` – feature folders, each exposing a single `public-api.ts`.
  - Example: `src/features/landing/` with `components/`, `constants/`, `page/`, `types/`, and `public-api.ts`.
- `src/shared/` – reusable design‑system/UI, global tokens, and vetted utilities only.
  - `src/shared/ui/` components (e.g., `navbar.tsx`, `search-bar.tsx`) re‑exported via `src/shared/ui/public-api.ts`.
  - `src/shared/styles/tailwind.css` – global reset/tokens import point.
  - `src/shared/public-api.ts` – shared entry that imports global styles and re‑exports shared modules.
- `src/locales/` – per‑language namespaces (e.g., `en/landing.ts`, `fr/common.ts`).

Logic placement rules:
- Pages orchestrate; no business logic and no direct network calls.
- Business logic lives in `services/` (pure, deterministic) and `hooks/` per feature.
- Cross‑feature access occurs only via each feature’s `public-api.ts`.
- Data fetching never in `useEffect`; use route loaders or Suspense hooks.

## How to Launch
Prereqs: Node.js 20+ and npm. ( we will move soon to pnpm manager)
- Install: `cd frontend && npm ci`
- Dev server: `npm run dev` then open the printed URL
- Production build: `npm run build`
- Preview the production build locally: `npm run preview`
- Lint: `npm run lint` (or `npm run lint:fix`)

## Production Readiness
Current status:
- Build artifacts under `frontend/dist` are static and can be hosted via any CDN or static server.
- Routing is SPA‑only today; SEO for dynamic pages is limited without SSR.
- Query/Router DevTools gated to `import.meta.env.DEV` only.
- No client‑side secrets; env exposure follows Vite’s `VITE_` rule.
- Security baseline documented in `frontend/guideline/security.md`.

Ready for production as a static SPA when:
- Pages do not require server rendering for SEO or TTI.
- Security headers are set at the edge (CSP with nonce/strict‑dynamic, HSTS, Referrer‑Policy, Permissions‑Policy, frame‑ancestors, etc.).
- CORS configured strictly on the API domain; credentials never with wildcards.

Recommended next steps for stronger production posture:
- SSR/streaming and server functions via TanStack Start if SEO or performance budgets require it.
- CI gates: typecheck, lint, tests, and size budgets; secret scanning and dependency audit.
- CSP nonce plumbing and Trusted Types in the serving layer.

## Good Practices (enforced and expected)
- TanStack‑first: Router (file‑based, prefetch), Query (Suspense hooks), Table (headless + `flexRender`), Virtual for long lists, Form for complex forms.
- Strict boundaries: feature architecture with a single `public-api` per feature; no deep imports across features.
- Rendering: wrap data reads under `<Suspense>` with error boundaries; avoid waterfalls by using parent loaders.
- State: remote via TanStack Query; local UI via `useState`/`useReducer`; avoid global stores except for stable shared UI state.
- Performance: code‑split, prefetch/preconnect/preload critical assets; virtualize lists beyond ~200 items; stable keys.
- Security: no tokens in Web Storage; avoid `dangerouslySetInnerHTML`; sanitize via DOMPurify + Trusted Types only if unavoidable.
- Testing: focus on services/hooks; UI via Testing Library behaviors; keep critical logic coverage ≥ 80% when applicable.

## Developer Instructions
- Install and run: see “How to Launch”. Prefer `npm ci` for deterministic installs.
- Routing: add routes under `src/routes/` and let the plugin regenerate `routeTree`. Use loaders/actions for data orchestration.
- Features: expose only from each feature’s `public-api.ts`. Do not import internal files across features.
- Data fetching: never inside `useEffect`. Use `useSuspenseQuery`/`useSuspenseQueries` or route loaders, always under `<Suspense>`.
- Tables/lists: implement with TanStack Table and virtualize with `@tanstack/react-virtual` for large datasets.
- Forms: simple cases with native `<form action={fn}>`, `useActionState`, `useFormStatus`, `useOptimistic`; complex forms with TanStack Form.
- Styling: Tailwind utilities scoped to components; keep global CSS to tokens/reset in `shared/styles`.
- i18n: add keys under `src/locales/{lang}/...` and access via `useTranslation(namespace)`.
- Lint/Type/Size: keep ESLint strict rules green; type errors must be fixed; respect size budgets (CI).
- Security: follow `frontend/guideline/security.md`. No secrets in client, set strict CSP and headers at the edge.

## References
- High‑level defaults: `AGENTS.md` (root)
- System guidelines: `frontend/guideline/system.md`
- Security baseline: `frontend/guideline/security.md`
- Scalability/TanStack usage: `frontend/guideline/scalability.md`

---
Assumptions: This frontend currently ships as a static SPA (if wee need ot move for fullstack application , we can discuss on the topic). If you need SEO‑critical pages or server functions, we’ll enable SSR/streaming with TanStack Start.

